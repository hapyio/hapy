["function _f0d3ac36beec1dac2e1f3c3477ffd98460e9ff8c",50,422346,"JsonP",377856,36,"util.JSONP\",singleton:true,requestCount:0,requests:{},timeout:30000",51084,47,"callbackKey:\"callback\",request:function(m){m=Ext.apply({},m);var i=this,d=Ext.isDefined(m.disableCaching)?m.disableCaching:i.disableCaching,g=m.disableCachingParam||i.disableCachingParam,c=++i.requestCount,k=m.callbackName||\"callback\"+c,h=m.callbackKey||i.callbackKey,l=Ext.isDefined(m.timeout)?m.timeout:i.timeout,e=Ext.apply({},m.params),b=m.url,a=Ext.isSandboxed?Ext.getUniqueGlobalNamespace():\"Ext\",f,j;e[h]=a+\".data.JsonP.\"+k;if(d){e[g]=new Date().getTime()}j=i.createScript(b,e,m);i.requests[c]=f={url:b,params:e,script:j,id:c,scope:m.scope,success:m.success,failure:m.failure,callback:m.callback,callbackKey:h,callbackName:k};if(l>0){f.timeout=setTimeout(Ext.bind(i.handleTimeout,i,[f]),l)}i.setupErrorHandling(f);i[k]=Ext.bind(i.handleResponse,i,[f],true);i.loadScript(f);return f},abort:function(b){var c=this.requests,a;if(b){if(!b.id){b=c[b]}this.handleAbort(b)}else{",113064,36,"this.abort(c[a])}}}},setupErrorHandling:function(a){a.script.onerror=Ext.bind(this.handleError,this,[a])},handleAbort:function(a){a.errorType=\"abort\";this.handleResponse(null,a)},handleError:function(a){a.errorType=\"error\";this.handleResponse(null,a)},cleanupErrorHandling:function(a){a.script.onerror=null},handleTimeout:function(a){a.errorType=\"timeout\";this.handleResponse(null,a)},handleResponse:function(a,b){var c=true;if(b.timeout){clearTimeout(b.timeout)}delete this[b.callbackName];delete this.requests[b.id];this.cleanupErrorHandling(b);Ext.fly(b.script).destroy();if(b.errorType){c=false;Ext.callback(b.failure,b.scope,[b.errorType,b])}else{Ext.callback(b.success,b.scope,[a,b])}",288332,33,"c,a,b.errorType,b])},createScript:function(c,d,b){var a",53104,33,";a.setAttribute(\"src\",Ext.urlAppend(c,Ext.Object.toQueryString(d)));a.setAttribute(\"async\",true);a.setAttribute(\"type\",\"text/javascript\");return a},loadScript:function(a){Ext.getHead().appendChild(a.script)}},0,0,0,0,0,0,[Ext.data,\"JsonP\",Ext.util,\"JSONP",373664,33,422396,1211,"identifier.Uuid\",Ext.data.identifier.Simple,{isUnique:true,config:{id:undefined,salt:null,timestamp:null,version:4},applyId:function(a){if(a===undefined){return Ext.data.identifier.Uuid.Global",222957,32,"){var a=this;Ext.data.identifier.Simple",201471,45,"a.parts=[];a.init()},reconfigure:function(a){this.setConfig(a);this.init()},generate:function(){var c=this,e=c.parts,a=c.getVersion(),b=c.getSalt(),d=c.getTimestamp();e[0]=c.toHex(d.lo,8);e[1]=c.toHex(d.hi&65535,4);e[2]=c.toHex(((d.hi>>>16)&4095)|(a<<12),4);e[3]=c.toHex(128|((c.clockSeq>>>8)&63),2)+c.toHex(c.clockSeq&255,2);e[4]=c.toHex(b.hi,4)+c.toHex(b.lo,8);if(a==4){c.init()}else{++d.lo;if(d.lo>=c.twoPow32){d.lo=0;++d.hi}}return e.join(\"-\").toLowerCase()},init:function(){var b=this,a=b.getSalt(),c=b.getTimestamp();if(b.getVersion()==4){b.clockSeq=b.rand(0,b.twoPow14-1);if(!a){a={};b.setSalt(a)}if(!c){c={};b.setTimestamp(c)}a.lo=b.rand(0,b.twoPow32-1);a.hi=b.rand(0,b.twoPow16-1);c.lo=b.rand(0,b.twoPow32-1);c.hi=b.rand(0,b.twoPow28-1)}else{b.setSalt(b.split(b.getSalt()));b.setTimestamp(b.split(b.getTimestamp()));b.getSalt().hi|=256}},twoPow14:Math.pow(2,14),twoPow16:Math.pow(2,16),twoPow28:Math.pow(2,28),twoPow32:Math.pow(2,32),toHex:function(c,b){var a=c.toString(16);if(a.length>b){a=a.substring(a.length-b)}else{if(a.length<b){a=Ext.String.leftPad(a,b,\"0\")}}return a},rand:function(a,c){var b=Math.random()*(c-a+1);return Math.floor(b)+a},split:function(b){if(typeof(b)==\"number\"){var a=Math.floor(b/this.twoPow32);return{lo:Math.floor(b-a*this.twoPow32),hi:a}}return b}},1,0,0,0,[\"data.identifier.uuid\"],0,[Ext.data.identifier,\"Uuid\"],function(){this.Global=new this({id:\"uuid\"})",368047,36,"JsonP",376819,44,"\"Ext.data.ScriptTagProxy\",config:{defaultWriterType:\"base\",callbackKey:\"callback\",recordParam:\"records\",autoAppendParams:true",377070,39,"c=d.buildRequest(a),e=c.getParams();c.setConfig({callbackKey:d.getCallbackKey(),timeout:d.getTimeout(),scope:d",377225,42,"});if(d.getAutoAppendParams()){c.setParams({})}c.setJsonP(Ext.data.JsonP.request(c.getCurrentConfig()));c.setParams(e);a.setStarted();d.lastRequest=c;return c",377602,69,"h,f,g){delete c.lastRequest;",377678,32,",setException:function(b,a){b.setException(b.getRequest().getJsonP().errorType)},buildUrl:function(f){var e=this,a=Ext.data.proxy.Server.prototype.buildUrl.apply(this,arguments),h=Ext.apply({},f.getParams()),d=h.filters,c,b,g;delete h.filters;if(e.getAutoAppendParams()){a=Ext.urlAppend(a,Ext.Object.toQueryString(h))}if(d&&d.length){for(b=0;b<d.length;b++){c=d[b];g=c.getValue();if(g){a=Ext.urlAppend(a,c.getProperty()+\"=\"+g)}}}return a},destroy:function(){this.abort();Ext.data.proxy.Server",420464,41,",abort:function(){var a=this.lastRequest;if(a){Ext.data.JsonP.abort(a.getJsonP())}}},0,0,0,0,[\"proxy.jsonp\",\"proxy.scripttag\"],0,[Ext.data.proxy,\"JsonP\",Ext.data,\"ScriptTag",368992,38,"proxy.WebStorage",368280,54,"WebStorageProxy\",config:{id:undefined,reader:null,writer:null,enablePagingParams:false,defaultDateFormat:\"Y-m-d H:i:s.u\"},constructor:function(a){Ext.data.proxy.Clien",590478,46,"this.cache={}},updateModel:function(a){if(!this.getId()){this.setId(a.modelName)}Ext.data.proxy.Client.prototype.updateModel.apply(this,arguments)},create:function(e,h,j){var d=e.getRecords(),c=d.length,a=this.getIds(),b,g,f;e.setStarted();for(f=0;f<c;f++){g=d[f];b=g.getId();this.setRecord(g);a.push(b)}this.setIds(a);e.setCompleted();e.setSuccessful();if(typeof h==\"function\"){h.call(j||this,e)}},read:function(h,o,p){var e=[],a=this.getIds(),l=this.getModel(),q=l.getIdProperty(),g=h.getParams()||{},n=h.getSorters(),d=h.getFilters(),b=h.getStart(),f=h.getLimit(),c=a.length,j,k,m;if(g[q]!==undefined){k=this.getRecord(g[q]);if(k){e.push(k);h.setSuccessful()}}else{for(j=0;j<c;j++){k=this.getRecord(a[j]);if(k){e.push(k)}}m",421054,33,");if(d&&d.length){m.setFilters(d)}if(n&&n.length){m.setSorters(n)}m.addAll(e);if(this.getEnablePagingParams()&&b!==undefined&&f!==undefined){e=m.items.slice(b,b+f)}else{e=m.items.slice()}h.setSuccessful()}h.setCompleted();h.setResultSet(Ext.create(\"Ext.data.ResultSet\",{records:e,total:e.length,loaded:true}));h.setRecords(e);if(typeof o==\"function\"){o.call(p||this,h)}},update:function(e,h,j){var d=e.getRecords(),c=d.length,a=this.getIds(),g,b,f;e.setStarted();for(f=0;f<c;f++){g=d[f];this.setRecord(g);b=g.getId();if(b!==undefined&&Ext.Array.indexOf(a,b)==-1){a.push(b)}}this.setIds(a);e.setCompleted();e.setSuccessful();if(typeof h==\"function\"){h.call(j||this,e)}},destroy:function(b,h,e){var a=b.getRecords(),f=a.length,d=this.getIds(),g=[].concat(d),c;b.setStarted();for(c=0;c<f;c++){Ext.Array.remove(g,a[c].getId());this.removeRecord(a[c],false)}this.setIds(g);",368486,35,"if(typeof h==\"function\"){h.call(e||this,b)}},getRecord:function(c){if(this.cache[c]===undefined){var m=this.getRecordKey(c),n=this.getStorageObject().getItem(m),g={},e=this.getModel(),k=e.getFields().items,d=k.length,h,l,b,j,a,f;if(!n){return undefined}a=Ext.decode(n);for(h=0;h<d;h++){l=k[h];b=l.getName();f=a[b];if(typeof l.getDecode()==\"function\"){g[b]=l.getDecode()(f)}else{if(l.getType().type==\"date\"){g[b]=this.readDate(l,f)}else{g[b]=f}}}j=new e(g,c);this.cache[c]=j}return this.cache[c]},setRecord:function(l,c){if(c){l.setId(c)}else{c=l.getId()}var o=this,a=l.getData(),k={},f=o.getModel(),m=f.getFields().items,d=m.length,j=0,g,p,b,h,q;for(;j<d;j++){p=m[j];b=p.getName();g=a[b];if(p.getPersist()===false){continue}if(typeof p.getEncode()==\"function\"){k[b]=p.getEncode()(g,l)}else{if(p.getType().type==\"date\"&&Ext.isDate(g)){k[b]=this.writeDate(p,g)}else{k[b]=g}}}h=o.getStorageObject();q=o.getRecordKey(c);o.cache[c]=l;h.removeItem(q);try{h.setItem(q,Ext.encode(k))}catch(n",368837,35,")}l.commit()},removeRecord:function(d,c){var b=this,a;if(d.isModel){d=d.getId()}if(c!==false){a=b.getIds();Ext.Array.remove(a,d);b.setIds(a)}delete this.cache[d];b.getStorageObject().removeItem(b.getRecordKey(d))},getRecordKey:function(a){if(a.isModel){a=a.getId()}return Ext.String.format(\"{0}-{1}\",this.getId(),a)},getIds:function(){var b=(this.getStorageObject().getItem(this.getId())||\"\").split(\",\"),c=b.length,a;if(c==1&&b[0]===\"\"){b=[]}return b},setIds:function(a){var c=this.getStorageObject(),d=a.join(\",\"),f=this.getId();c.removeItem(f);if(!Ext.isEmpty(d)){try{c.setItem(f,",361143,44,"b)}}},writeDate:function(c,b){if(Ext.isEmpty(b)",363109,39,"this.getDefaultDateFormat()",363159,119,"readDate:function(c,b){if(Ext.isEmpty(b)",363109,39,"this.getDefaultDateFormat()",363159,34,"new Date(b*1000);case\"time\":return new Date(b);default:return Ext.isDate(b)?b:Ext.Date.parse(b,a)}",520854,32,".proxy.Clien",598681,44,";var a=this.getStorageObject();try{a.setItem(this.getId(),a.getItem(this.getId())||\"\"",361144,43,"b)}},clear:function(){var d=this.getStorageObject(),c=this.getIds(),a=c.length,b;for(b=0;b<a;b++){this.removeRecord(c[b],false)}d.removeItem(this.getId())},getStorageObject:function(){}},1,0,0,0,0,0,[Ext.data.proxy,\"WebStorage\",Ext.data,\"WebStorage",368992,38,"proxy.LocalStorage\",Ext.data.proxy.WebStorag",422416,32,"LocalStorageProxy\",getStorageObject:function(){return window.localStorage}},0,0,0,0,[\"proxy.localstorage\"],0,[Ext.data.proxy,\"LocalStorage\",Ext.data,\"LocalStorage",368992,38,423607,176120,"report",599731,41,"name_restaurant\",type:\"string\"},{name:\"day\",type:\"date\"},{name:\"service\",type:\"string\"},{name:\"sales\",type:\"int\"},{name:\"note\",type:\"string\"},{name:\"warning_note\",type:\"string\"},{name:\"weather\",type:\"string\"}]}},0,0,0,0,0,0,[MyApp.model,\"re",599687,40,"Task",599731,64,"completed\",type:\"boolean\"},{name:\"title\",type:\"string\"},{name:\"description",599944,62,"Task",599691,36,"APImeteo",599731,34,"\"cod\",\"message\",\"city\",\"cnt\",\"list\"]}},0,0,0,0,0,0,[MyApp.model,\"APImeteo",599691,36,"Stock",599731,41,"name_ingredient\",type:\"string\"},{name:\"quantite\",type:\"int\"}]}},0,0,0,0,0,0,[MyApp.model,\"Stock",599691,36,"AddModel",599731,43,"_restaurant\",type:\"int\"},{name:\"day\",type:\"string\"},{name:\"service\",type:\"string\"},{name:\"sales\",type:\"int\"},{name:\"note\",type:\"string\"},{name:\"warning_note\",type:\"string\"},{name:\"weather\",type:\"string\"}]}},0,0,0,0,0,0,[MyApp.model,\"AddModel",599691,36,"Session\",Ext.data.Model,{config:{identifier:\"uuid\",fields:[\"sessionId\",\"permission\",\"restaurant\",\"id_restaurant\"]}},0,0,0,0,0,0,[MyApp.model,\"Session\"],0));(Ext.cmd.derive(\"MyApp.store.Report",600073,50,"report\",storeId:\"reportStore\",proxy:{type:\"ajax\",actionMethods:\"POST\",url:\"http://hapy.io/json",600206,40,"reports\"},callback:function(a){console.log(a)}}}},0,[\"reportstore\"],[\"reportstore\"],{reportstore:true},[\"widget.reportstore\"],0,[MyApp.store,\"ReportStore\"],0));(Ext.cmd.derive(\"MyApp.store.TaskStore\",Ext.data.Store,{config:{autoLoad:true,autoSync:true,model:\"MyApp.model.Task\",storeId:\"TaskStore\",data:[{completed:\"false\",title:\"Pains \ufffff\ufffff hamburger\",description:\"100\"},{completed:\"true\",title:\"Sauce tomate\",description:\"100\"},{completed:\"false\",title:\"Fromage\",description:\"100\"},{completed:\"false\",title:\"Viande hach\ufffff\ufffffe\",description:\"100\"},{completed:\"false\",title:\"Salade\",description:\"100\"},{completed:\"false\",title:\"Pickles\",description:\"100\"}]}},0,0,0,0,0,0,[MyApp.store,\"TaskStore\"],0));(Ext.cmd.derive(\"MyApp.store.ReportDetail",600073,50,"report\",storeId:\"reportDetailStore\",proxy:{type:\"ajax\",actionMethods:\"POST\",url:\"http://hapy.io/json",600206,40,"reports\"},callback:function(a){console.log(a)}}}},0,[\"reportdetailstore\"],[\"reportdetailstore\"],{reportdetailstore:true},[\"widget.reportdetailstore\"],0,[MyApp.store,\"ReportDetailStore\"],0));(Ext.cmd.derive(\"MyApp.store.ApiMeteo",600073,50,"APImeteo\",storeId:\"apimeteoStore\",proxy:{type:\"jsonp\",url:\"http://api.openweathermap.org/data/2.5/forecast/daily?q=Paris,fr&mode=json&units=metric&cnt=6&lang=fr\",reader:{type:\"json\"}}}},0,[\"apimeteostore\"],[\"apimeteostore\"],{apimeteostore:true},[\"widget.apimeteostore\"],0,[MyApp.store,\"ApiMeteoStore\"],0));(Ext.cmd.derive(\"MyApp.store.Previsions",600073,50,"report\",storeId:\"previsionsstore\",proxy:{type:\"ajax\",url:\"http://hapy.io/jsonHisto",600206,40,"reports\"},callback:function(a){console.log(a)}}}},0,[\"previsionsstore\"],[\"previsionsstore\"],{previsionsstore:true},[\"widget.previsionsstore\"],0,[MyApp.store,\"PrevisionsStore\"],0));(Ext.cmd.derive(\"MyApp.store.Stock",600073,50,"Stock\",storeId:\"stockstore\",proxy:{type:\"ajax\",url:\"http://hapy.io/jsonStocks",600206,40,"stocks\"},callback:function(a){console.log(a)}}}},0,[\"stockstore\"],[\"stockstore\"],{stockstore:true},[\"widget.stockstore\"],0,[MyApp.store,\"StockStore\"],0));(Ext.cmd.derive(\"MyApp.store.SendAdd",600073,50,"AddModel\",storeId:\"sendAdd\",proxy:{type:\"ajax\",actionMethods:\"POST\",url:\"http://hapy.io/post.php\",reader:{type:\"json\"}},listeners:[{fn:\"onArraystoreBeforeLoad\",event:\"beforeload\"}]}},0,0,0,0,0,0,[MyApp.store,\"SendAddStore\"],0));(Ext.cmd.derive(\"MyApp.store.Session",600073,50,"Session\",autoLoad:true,proxy:{type:\"localstorage\",id:\"SessionStore\"}}},0,0,0,0,0,0,[MyApp.store,\"SessionStore",602702,35,600475,137,"3",600613,1438,602065,35,600542,89,602253,58,"name:\"restaurant\"},{xtype:\"label",602251,125,"id:\"bMidi\",style:\"height:30%;margin:1%;\"",602420,38,"action:\"soir\",id:\"bSoir\",style:\"height:30%;margin:1%;\"",602506,203,"var m_number=new Array(\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"12\"",602707,43,"navigation.View,{config:{id:\"nvViewReports\",items:[{xtype:\"panel\",title:\"Rapport\",id:\"ViewReports1\",items:[{margin:\"40\",xtype:\"datepickerfield\",dateFormat:\"d/m/Y\",label:\"Date\",id:\"ReportsDatePicker\",name:\"rapportdate\",value:new Date(),picker:{slotOrder:[\"day\",\"month\",\"year\"],yearFrom:new Date().getFullYear()-1,listeners:{show:function(b,c){var a=this.getValue()},cancel:function(a,b){},change:function(b,c){var d=c.getFullYear()+\"-\"+m_number[c.getMonth()]+\"-\"+c.getDat",601412,55,"Ext.getStore(\"reportStore\").getProxy().setExtraParams({jour:d,sum:1,token:Ext.getStore(\"SessionStore\").getAt(0).data.sessionId});Ext.getStore(\"reportStore\").load();Ext.getCmp(\"reportsList\").setStore(Ext.getStore(\"reportStore\"))});a.delay(500)}}}},{style:\"height:60%\",id:\"reportsList\",docked:\"bottom\",xtype:\"list\",itemTpl:\"{name_restaurant} - {sales}\ufffff\ufffff\ufffff\",title:\"Tests\"",602875,51,"navigationview",602923,48,"navigationview",602965,80,"yearN1=new Date().getFullYear()-1;var opts=[{text:\"Argout\",value:\"Argout\"},{text:\"Beaumarchais\",value:\"Beaumarchais\"},{text:\"R?publique\",value:\"Republique\"},{text:\"M?nilmontant\",value:\"Menilmontant\"}];var m_number=new Array(\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"12\");var weekday=new Array(7);weekday[0]=\"Dim.\";weekday[1]=\"Lun.\";weekday[2]=\"Mar.\";weekday[3]=\"Mer.\";weekday[4]=\"Jeu.\";weekday[5]=\"Ven.\";weekday[6]=\"Sam.\";function afficherImage(b,a){if(b.id==802){a.setSrc(\"./resources/icons/cloudy.png\")}else{if(b.id==803||b.id==804){a.setSrc(\"./resources/icons/hazy.png\")}else{if(b.id==800){a.setSrc(\"./resources/icons/sunny.png\")}else{if(b.id==801){a.setSrc(\"./resources/icons/mostlysunny.png\")}else{if(b.id>=200&&b.id<=232){a.setSrc(\"./resources/icons/tstorms.png\")}else{if(b.id>=500&&b.id<=502||b.id==901){a.setSrc(\"./resources/icons/rain.png\")}else{if(b.id>=300&&b.id<=321){a.setSrc(\"./resources/icons/sleet.png\")}else{if(b.id==600){a.setSrc(\"./resources/icons/snow.png\")}else{a.setSrc(",603612,45,")}}}}}}}}}(Ext.cmd.derive(\"MyApp.view.Prevision",602743,41,"titlebar\",docked:\"top\",title:\"Previsions\"},{xtype:\"selectfield\",id:\"restpick\",label:\"Restaurant\",autoSelect:false,placeHolder:\"Choississez...\",options:opts,margin:10},{xtype:\"container\",style:\"margin-top:30px;\",layout:\"vbox\",items:[{xtype:\"container\",layout:\"hbox\",items:[{xtype:\"container\",layout:\"vbox\",style:\"width:50%;\",items:[{xtype:\"label\",name:\"J",602251,59,"},{xtype:\"label\",name:\"CAN1_J",602251,59,"}]},{xtype:\"container\",layout:\"vbox\",style:\"width:50%\",items:[{xtype:\"image\",name:\"meteo_J\",id:\"meteo_J\",mode:\"image\",style:\"background-repeat: no-repeat;background-size: auto 100%;background-position: center;\"}]}]},{xtype:\"container\",layout:\"hbox\",items:[{xtype:\"container\",layout:\"vbox\",style:\"width:50%;\",items:[{xtype:\"label\",name:\"J1",602251,59,"},{xtype:\"label\",name:\"CAN1_J1",602251,59,"}]},{xtype:\"container\",layout:\"vbox\",style:\"width:50%\",items:[{xtype:\"image\",name:\"meteo_J1\",id:\"meteo_J1\",mode:\"image\",style:\"background-repeat: no-repeat;background-size: auto 100%;background-position: center;\"}]}]},{xtype:\"container\",layout:\"hbox\",items:[{xtype:\"container\",layout:\"vbox\",style:\"width:50%;\",items:[{xtype:\"label\",name:\"J2",602251,59,"},{xtype:\"label\",name:\"CAN1_J2",602251,59,"}]},{xtype:\"container\",layout:\"vbox\",style:\"width:50%\",items:[{xtype:\"image\",name:\"meteo_J2\",id:\"meteo_J2\",mode:\"image\",style:\"background-repeat: no-repeat;background-size: auto 100%;background-position: center;\"}]}]},{xtype:\"container\",layout:\"hbox\",items:[{xtype:\"container\",layout:\"vbox\",style:\"width:50%;\",items:[{xtype:\"label\",name:\"J3",602251,59,"},{xtype:\"label\",name:\"CAN1_J3",602251,59,"}]},{xtype:\"container\",layout:\"vbox\",style:\"width:50%\",items:[{xtype:\"image\",name:\"meteo_J3\",id:\"meteo_J3\",mode:\"image\",style:\"background-repeat: no-repeat;background-size: auto 100%;background-position: center;\"}]}]},{xtype:\"container\",layout:\"hbox\",items:[{xtype:\"container\",layout:\"vbox\",style:\"width:50%;\",items:[{xtype:\"label\",name:\"J4",602251,59,"},{xtype:\"label\",name:\"CAN1_J4",602251,59,"}]},{xtype:\"container\",layout:\"vbox\",style:\"width:50%\",items:[{xtype:\"image\",name:\"meteo_J4\",id:\"meteo_J4\",mode:\"image\",style:\"background-repeat: no-repeat;background-size: auto 100%;background-position: center;\"}]}]},{xtype:\"container\",layout:\"hbox\",items:[{xtype:\"container\",layout:\"vbox\",style:\"width:50%;\",items:[{xtype:\"label\",name:\"J5",602251,59,"},{xtype:\"label\",name:\"CAN1_J5",602251,59,"}]},{xtype:\"container\",layout:\"vbox\",style:\"width:50%\",items:[{xtype:\"image\",name:\"meteo_J5\",id:\"meteo_J5\",mode:\"image\",style:\"background-repeat: no-repeat;background-size: auto 100%;background-position: center;\"}]}]}]}]},updateWithRecord:function(h){var c=2;storeCA=Ext.getStore(\"previsionsstore\");store=Ext.getStore(\"apimeteoStore\");e=new Date();var g=e.getFullYear()-1+\"-\"+m_number[e.getMonth()]+\"-\"+e.getDate();storeCA.getProxy().setExtraParams({jour:g,restaurant:h});store.load();storeCA.load();Ext.Viewport",442206,37,"\"Chargement...\"});var m=this.down('label[name=\"J\"]');var d=this.down('label[name=\"J1\"]');var b=this.down('label[name=\"J2\"]');var a=this.down('label[name=\"J3\"]');var p=this.down('label[name=\"J4\"]');var o=this.down('label[name=\"J5\"]');var e=new Date();m.setHtml(weekday[e.getDay()]+\" \"+e.getDate()+\"/\"+m_number[e.getMonth()]);e=new Date(new Date().getTime()+24*60*60*1000);d.setHtml(weekday[e.getDay()]+\" \"+e.getDate()+\"/\"+m_number[e.getMonth()]);e=new Date(new Date().getTime()+48*60*60*1000);b.setHtml(weekday[e.getDay()]+\" \"+e.getDate()+\"/\"+m_number[e.getMonth()]);e=new Date(new Date().getTime()+72*60*60*1000);a.setHtml(weekday[e.getDay()]+\" \"+e.getDate()+\"/\"+m_number[e.getMonth()]);e=new Date(new Date().getTime()+96*60*60*1000);p.setHtml(weekday[e.getDay()]+\" \"+e.getDate()+\"/\"+m_number[e.getMonth()]);e=new Date(new Date().getTime()+120*60*60*1000);o.setHtml(weekday[e.getDay()]+\" \"+e.getDate()+\"/\"+m_number[e.getMonth()]);var f=this.down('label[name=\"CAN1_J\"]');var n=this.down('label[name=\"CAN1_J1\"]');var l=this.down('label[name=\"CAN1_J2\"]');var k=this.down('label[name=\"CAN1_J3\"]');var j=this.down('label[name=\"CAN1_J4\"]');var i=this.down('label[name=\"CAN1_J5\"]');store.on(\"load\",function(){c=c-1;if(c==0){Ext.Viewport.setMasked(false)}meteoJ=Ext.getStore(\"apimeteoStore\").getAt(0).get(\"list\")[0].weather[0];meteoJ1=Ext.getStore(\"apimeteoStore\").getAt(0).get(\"list\")[1].weather[0];meteoJ2=Ext.getStore(\"apimeteoStore\").getAt(0).get(\"list\")[2].weather[0];meteoJ3=Ext.getStore(\"apimeteoStore\").getAt(0).get(\"list\")[3].weather[0];meteoJ4=Ext.getStore(\"apimeteoStore\").getAt(0).get(\"list\")[4].weather[0];meteoJ5=Ext.getStore(\"apimeteoStore\").getAt(0).get(\"list\")[5].weather[0];afficherImage(meteoJ,Ext.getCmp(\"meteo_J\"));afficherImage(meteoJ1,Ext.getCmp(\"meteo_J1\"));afficherImage(meteoJ2,Ext.getCmp(\"meteo_J2\"));afficherImage(meteoJ3,Ext.getCmp(\"meteo_J3\"));afficherImage(meteoJ4,Ext.getCmp(\"meteo_J4\"));afficherImage(meteoJ5,Ext.getCmp(\"meteo_J5\"))});storeCA.on(\"load\",function(){c=c-1;if(c==0){Ext.Viewport.setMasked(false)}var t=storeCA.getAt(0).get(\"sales\");var q=storeCA.getAt(1).get(\"sales\");var w=storeCA.getAt(2).get(\"sales\");var v=storeCA.getAt(3).get(\"sales\");var u=storeCA.getAt(4).get(\"sales\");var s=storeCA.getAt(5).get(\"sales\");var r=new Date();r.setFullYear(r.getFullYear()-1);f.setHtml(\"(\"+weekday[r.getDay()]+\") \"+yearN1+\" : \"+t+\" \ufffff\ufffff\ufffff\");r=new Date(new Date().getTime()+24*60*60*1000);r.setFullYear(r.getFullYear()-1);n.setHtml(\"(\"+weekday[r.getDay()]+\") \"+yearN1+\" : \"+q+\" \ufffff\ufffff\ufffff\");r=new Date(new Date().getTime()+48*60*60*1000);r.setFullYear(r.getFullYear()-1);l.setHtml(\"(\"+weekday[r.getDay()]+\") \"+yearN1+\" : \"+w+\" \ufffff\ufffff\ufffff\");r=new Date(new Date().getTime()+72*60*60*1000);r.setFullYear(r.getFullYear()-1);k.setHtml(\"(\"+weekday[r.getDay()]+\") \"+yearN1+\" : \"+v+\" \ufffff\ufffff\ufffff\");r=new Date(new Date().getTime()+96*60*60*1000);r.setFullYear(r.getFullYear()-1);j.setHtml(\"(\"+weekday[r.getDay()]+\") \"+yearN1+\" : \"+u+\" \ufffff\ufffff\ufffff\");r=new Date(new Date().getTime()+120*60*60*1000);r.setFullYear(r.getFullYear()-1);i.setHtml(\"(\"+weekday[r.getDay()]+\") \"+yearN1+\" : \"+s+\" \ufffff\ufffff\ufffff\")})}},0,[\"prevision",602892,34,"previsions",601727,39,"revisionsview:true},[\"widget.previsionsview\"],0,[MyApp.view,\"Previsions\"],0)",601871,63,"TaskList",602744,40,"list\",docked:\"top\",id:\"taskList\",style:\"height:80%;\",displayField:\"title\",cls:\"myList\",store:Ext.create(\"MyApp.store.TaskStore\"),itemTpl:new Ext.XTemplate('<tpl for=\".\">','<tpl if=\"completed ==true\"\">','<div style=\"color: #038000;\">Done : {title}</div>',\"</tpl>\",'<tpl if=\"completed !=true\"\">','<div  class=\"\">Todo : {title}</div>',\"</tpl>\",\"</tpl>\"),items:[{xtype:\"toolbar\",title:\"Liste des aliments \ufffff\ufffff pr\ufffff\ufffffparer\"}]},{xtype:\"button\",text:\"Terminer\",docked:\"bottom\",style:\"margin:1%;\"}]}},0,[\"TaskL",471120,32,"TaskList",274208,33,",TaskList:true},[\"widget.TaskList\"],0,[MyApp.view,\"TaskList",602702,35,"Stock",602743,41,"titlebar\",docked:\"top\",title:\"Stocks\"},{xtype:\"selectfield\",label:\"Restaurant\",autoSelect:\"auto\",placeHolder:\"Choississez...\",margin:10,options:opts,listeners:{show:function(a,c){var b=this.getValue()},cancel:function(a,b){},change:function(b,c){",601416,51,"Ext.getStore(\"stockstore\").getProxy().setExtraParams({restaurant:c});Ext.getStore(\"stockstore\").load();Ext.getCmp(\"stocklist\").setStore(Ext.getStore(\"stockstore\"))});a.delay(500)}}},{height:400,id:\"stocklist\",docked:\"bottom\",xtype:\"list\",itemTpl:\"{name_ingredient} : {quantite}g\"}]}},0,[\"stock",602892,34,"stocks",601727,38,"stocksview:true},[\"widget.stocksview\"],0,[MyApp.view,\"Stocks",602702,35,"Compte\",Ext.Container,{id:\"Compte\",",604400,57,"items:[{xtype:\"titlebar\",docked:\"top\",title:\"Mon compte\"},",600527,97,"fieldset\",id:\"mainFieldset\",items:[{xtype:\"textfield\",id:\"utilisateurField\",label:\"Utilisateur\",name:\"utilisateur\",autoCapitalize:true,readOnly:\"true\"},{xtype:\"textfield\",id:\"restauField\",label:\"Restaurant\",name:\"restaurant\",autoCapitalize:true,readOnly:\"true\"}]},{xtype:\"toolbar\",layout:{pack:\"center\"},ui:\"plain\",items:[{xtype:\"button\",text:\"D\ufffff\ufffffconnexion\",ui:\"decline\",handler:function(b,a){Ext.Msg.confirm(\"D\ufffff\ufffffconnexion\",\"Confirmer la d\ufffff\ufffffconnexion ?\",function(c){if(c===\"yes\"){Ext.getStore(\"SessionStore\").getProxy().clear();window.location.href=window.location.href",607742,60,"})}}]}]},updateWithRecord:function(a,b){var c=this.down('textfield[name=\"utilisateur\"]');var d=this.down('textfield[name=\"restaurant\"]');c.setValue(a);d.setValue(b)}},0,[\"compte",602893,33,"compte",601727,38,"compteview:true},[\"widget.compteview\"],0,[MyApp.view,\"Compte",603034,62,603517,37,603111,64,"layout:\"fit",603744,39,603212,71,"layout:\"fit",603744,39,"previsionsview",603463,54,"layout:\"fit",603744,39,"TaskList",603697,38,"layout:\"fit\",iconCls:\"cart",603744,39,"stocksview\"}]};var window_compte={title:\"Compte\",layout:\"fit\",iconCls:\"user",603744,39,"compteview",603926,75,"itemI",603989,52,519643,33,"directionLock:true}",604119,952,"http://hapy.io/auth.php\",method:\"post\",params:{email:e,password:b},success:function(h){var f=Ext.JSON.decode(h.responseText);if(f.connection[0].success===\"1\"){var i=Ext.getStore(\"SessionStore\");i.removeAll();i.sync();var g=new MyApp.model.Session({sessionId:f.connection[0].token,permission:f.connection[0].permission,restaurant:f.connection[0].restaurant,id_restaurant:f.connection[0].id_restaurant});i.add(g);i.sync()",605244,40,"\"Identifiants \ufffff\ufffffrron\ufffff\ufffffs\")}},failure:function(f){d.sessionToken=null;d.signInFailure(\"Login failed. Please try again later.\")}})},signInSuccess:",249236,37,"mainview\"}]);",605364,168,"gn",605534,416,"var opts=[{text:\"RAS\",value:\"RAS\"},{text:\"Manifestations\",value:\"Manifestations\"},{text:\"Soldes\",value:\"Soldes\"},{text:\"Vacances scolaires Paris\",value:\"Vacances_intern\"},{text:\"Veille jour f\ufffff\ufffffri\ufffff\ufffff\",value:\"veille_ferie\"},{text:\"Pont\",value:\"Pont\"}];var optsmeteo=[{text:\"Ensoleill\ufffff\ufffff\",value:\"Ensoleill\ufffff\ufffff\"},{text:\"Nuageux\",value:\"Nuageux\"},{text:\"Pluies\",value:\"Pluies\"},{text:\"Neiges\",value:\"Neiges\"}]",605949,32,"Soir",605982,37,"r\",id:\"AddSoir",600518,113,602253,115,"label",602251,60,"name:\"restaurant\"},{xtype:\"label",602251,65,"\"Soir\"},",602776,33,"textfield\",id:\"ChiffresSoir\",label:\"Chiffre : \",margin:10},{xtype:\"selectfield\",label:\"Remarque :\",autoSelect:\"auto\",placeHolder:\"Choississez...\",id:\"RemarqueSoir\",usePicker:false,options:opts,margin:10},{xtype:\"selectfield\",label:\"M\ufffff\uffffft\ufffff\ufffffo :\",autoSelect:\"auto\",placeHolder:\"Choississez...\",id:\"MeteoSoir\",usePicker:false,options:optsmeteo,margin:10},{xtype:\"textfield\",label:\"Urgence :\",id:\"RemarqueUSoir\",margin:10}]},{xtype:\"toolbar\",layout:{pack:\"center\"},ui:\"plain\",items:[{xtype:\"button\",text:\"Envoyer\",ui:\"confirm\",handler:function(b,a){Chiffre=Ext.getCmp(\"ChiffresSoir\").getValue();Remarque=Ext.getCmp(\"RemarqueSoir\").getValue();Meteo=Ext.getCmp(\"MeteoSoir\").getValue();RemarqueU=Ext.getCmp(\"RemarqueUSoir\").getValue();Ext.Msg.confirm(\"Envoyer ?\",Chiffre+\"\ufffff\ufffff\ufffff - \"+Remarque+\" - \"+Meteo+\" - \"+RemarqueU,function(d,c){if(d===\"yes\"){Ext.getStore(\"sendAdd\").getProxy().setExtraParams({id_restaurant:1,day:today,service:\"soir\",sales:Chiffre,note:Remarque,warning_note:RemarqueU,weather:Meteo});Ext.getStore(\"sendAdd\").load()}},this)}}]}]},updateWithRecord:function(b){var a=this.down('label[name=\"restaurant\"]');a.setHtml(b)}},0,[\"addviewsoir",606229,36,"soi",274207,34,",addviewsoir:true},[\"widget.addviewsoir\"],0,[MyApp.view,\"AddSoir\"],0));var opts=[{text:\"RAS\",value:\"RAS\"},{text:\"Manifestations\",value:\"Manifestations\"},{text:\"Soldes\",value:\"Soldes\"},{text:\"Vacances scolaires Paris\",value:\"Vacances_intern\"},{text:\"Veille jour f\ufffff\ufffffri\ufffff\ufffff\",value:\"veille_ferie\"},{text:\"Pont\",value:\"Pont\"}];var optsmeteo=[{text:\"Ensoleill\ufffff\ufffff\",value:\"Ensoleill\ufffff\ufffff\"},{text:\"Nuageux\",value:\"Nuageux\"},{text:\"Pluies\",value:\"Pluies\"},{text:\"Neiges\",value:\"Neiges\"}];var m_number=new Array(\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"12\");var date=new Date();var today=date.getFullYear()+\"-\"+m_number[date.getMonth()]+\"-\"+date.getDate(",605948,33,"Midi",605982,37,"r\",id:\"AddMidi",600518,113,602253,115,"label",602251,60,"name:\"restaurant\"},{xtype:\"label",602251,65,"\"Midi\"},",602776,33,"textfield\",id:\"ChiffresMidi\",label:\"Chiffre : \",style:\"font-size:14px;\",margin:10},{xtype:\"selectfield\",id:\"RemarqueMidi\",label:\"Remarque :\",autoSelect:false,placeHolder:\"Choississez...\",usePicker:\"auto\",options:opts,margin:10},{xtype:\"selectfield\",id:\"MeteoMidi\",label:\"M\ufffff\uffffft\ufffff\ufffffo :\",autoSelect:false,placeHolder:\"Choississez...\",usePicker:\"auto\",options:optsmeteo,margin:10},{xtype:\"textfield\",id:\"RemarqueUMidi\",label:\"Urgence :\",placeHolder:\"Optionnel\",name:\"RemarqueU\",margin:10}]},{xtype:\"toolbar\",layout:{pack:\"center\"},ui:\"plain\",items:[{xtype:\"button\",text:\"Envoyer\",ui:\"confirm\",handler:function(b,a){Chiffre=Ext.getCmp(\"ChiffresMidi\").getValue();Remarque=Ext.getCmp(\"RemarqueMidi\").getValue();Meteo=Ext.getCmp(\"MeteoMidi\").getValue();RemarqueU=Ext.getCmp(\"RemarqueUMidi\").getValue();var c=RemarqueU;if(RemarqueU!=\"\"){c=\" - \"+RemarqueU}console.log(Chiffre);if(Chiffre==\"\"|Remarque==null|Meteo==null){Ext.Msg.alert(\"Hop !\",\"Veuillez compl\ufffff\ufffffter tous les champs obligatoires\")}else{Ext.Msg.confirm(\"Envoyer ?\",Chiffre+\"\ufffff\ufffff\ufffff - \"+Remarque+\" \"+c+\" - \"+Meteo,function(e,d){if(e===\"yes\"){Ext.getStore(\"sendAdd\").getProxy().setExtraParams({id_restaurant:1,day:today,service:\"midi\",sales:Chiffre,note:Remarque,warning_note:RemarqueU,weather:Meteo});Ext.getStore(\"sendAdd\").load()}},this)}}}]}]},updateWithRecord:function(b){var a=this.down('label[name=\"restaurant\"]');a.setHtml(b)}},0,[\"addviewmidi",606229,36,"midi",274208,33,",addviewmidi:true},[\"widget.addviewmidi\"],0,[MyApp.view,\"AddMidi",606870,41,"Add",604368,40,"views:[\"Add\",\"AddMidi\",\"AddSoir",606456,38,606514,143,"midi\"});Ext.getCmp(\"AddMidi\").updateWithRecord(Ext.getStore(\"SessionStore\").getAt(0).data.restaurant",606660,69,"soir\"});Ext.getCmp(\"AddSoir\").updateWithRecord(Ext.getStore(\"SessionStore\").getAt(0).data.restaurant",606732,78,"controller.Task",604368,40,"id:\"taskController\",refs:{taskList:\"#taskList\"},control:{taskList:{itemtap:\"showTask\",disclose:\"changeDoneStatus\"}}},launch:function(){},changeDoneStatus:function(f,b,h,c,g,d){var a=b.get(\"completed\");b.set(\"completed\",!a)},showTask:function(f,c,h,b,g,d){var a=b.get(\"completed\");b.set(\"completed\",!a);setTimeout(function(){f.deselect(c)},0)},cancel:function(b,c,a){this.showList(",606732,35,"TaskController\"],0));var m_number=new Array(\"01\",\"02\",\"03\",\"04\",\"05\",\"06\",\"07\",\"08\",\"09\",\"10\",\"11\",\"12\");var weekday=new Array(7);weekday[0]=\"Dim.\";weekday[1]=\"Lun.\";weekday[2]=\"Mar.\";weekday[3]=\"Mer.\";weekday[4]=\"Jeu.\";weekday[5]=\"Ven.\";weekday[6]=\"Sam.\"",602708,36,"Detail",602744,40,600535,96,"name:\"date",602251,59,"},{xtype:\"label\",name:\"restaurant",602251,59,"},{xtype:\"container\",style:\"margin-top:30px;\",layout:\"hbox\",items:[{layout:\"vbox\",style:\"width:50%\",items:[{html:\"Service midi",602251,59,"},{xtype:\"label\",name:\"ca_midi",602251,59,"},{xtype:\"label\",name:\"remarque_midi",602251,59,"},{xtype:\"label\",name:\"meteo_midi",602251,59,"},{xtype:\"label\",name:\"remarque_urgente_midi",602251,59,"}]},{layout:\"vbox\",style:\"width:50%;\",items:[{html:\"Service soir",602251,59,"},{xtype:\"label\",name:\"ca_soir",602251,59,"},{xtype:\"label\",name:\"remarque_soir",602251,59,"},{xtype:\"label\",name:\"meteo_soir",602251,59,"},{xtype:\"label\",name:\"remarque_urgente_soir",602251,59,"}]}]}]},updateWithRecord:function(h,a,g){labeldate=this.down('label[name=\"date\"]');labelrestaurant=this.down('label[name=\"restaurant\"]');var b=weekday[h.getDay()]+\" \"+h.getDate()+\"/\"+m_number[h.getMonth()]+\"/\"+h.getFullYear();labeldate.setHtml(b);labelrestaurant.setHtml(a);store=Ext.getStore(\"reportDetailStore\");store.getProxy().setExtraParams({jour:g,restaurant:a,token:Ext.getStore(\"SessionStore\").getAt(0).data.sessionId});store.load();Ext.Viewport",442206,37,"\"Chargement...\"});var e=this.down('label[name=\"ca_midi\"]');var f=this.down('label[name=\"remarque_midi\"]');var d=this.down('label[name=\"meteo_midi\"]');var c=this.down('label[name=\"remarque_urgente_midi\"]');var k=this.down('label[name=\"ca_soir\"]');var l=this.down('label[name=\"remarque_soir\"]');var j=this.down('label[name=\"meteo_soir\"]');var i=this.down('label[name=\"remarque_urgente_soir\"]');store.on(\"load\",function(){Ext.Viewport.setMasked(false);var m=Ext.getStore(\"reportDetailStore\").getAt(0);var n=Ext.getStore(\"reportDetailStore\").getAt(1);e.setHtml(m.get(\"sales\")+\" \ufffff\ufffff\ufffff\");f.setHtml(m.get(\"note\"));d.setHtml(m.get(\"weather\"));c.setHtml(m.get(\"warning_note\"));k.setHtml(n.get(\"sales\")+\" \ufffff\ufffff\ufffff\");l.setHtml(n.get(\"note\"));j.setHtml(n.get(\"weather\"));i.setHtml(n.get(\"warning_note\"))})}},0,[\"reportsdetail",602893,40,"detail",601727,38,"reportsdetailview:true},[\"widget.reportsdetailview\"],0,[MyApp.view,\"ReportsDetail",606870,41,"Report",604368,40,"views:[\"Reports\",\"ReportsDetail\"],refs:{reportsdetailView:\"reportsdetailview\",reportsList:\"#reportsList\"},control:{reportsList:{itemtap:\"showDetails\"}}},showDetails:function(d,b,h,a,g,c){value=a.get(\"day\");var f=value.getFullYear()+\"-\"+m_number[value.getMonth()]+\"-\"+value.getDate();Ext.getCmp(\"nvViewReports\").push({xtype:\"reportsdetailview\"});var i=this.getReportsdetailView();i.updateWithRecord(value,a.get(\"name_restaurant\"),f);setTimeout(function(){d.deselect(b)},500",606732,35,"Report",605933,40,"controller.Previsions",604368,40,"views:[\"Previsions\"],refs:{previsionsView:\"previsionsview\",restpicker:\"#restpick\"},control:{restpicker:{change:\"changePick\"}}},changePick:function(c,b){var a=this.getPrevisionsView();a.updateWithRecord(b",606732,35,"PrevisionsController",603034,62,603517,37,603111,64,"layout:\"fit",603744,39,603212,71,"layout:\"fit",603744,39,"previsionsview",603463,54,"layout:\"fit",603744,39,"TaskList",603697,38,"layout:\"fit\",iconCls:\"cart",603744,39,"stocksview\"}]};var window_compte={title:\"Compte\",layout:\"fit\",iconCls:\"user",603744,39,"compteview\"}]}",606876,35,"Ma",604366,42,"views:[\"Main\"],refs:{mainView:\"mainview\"},control:{\"#mainbar\":{initialize:\"onTabpanelInitialize\"}}},onTabpanelInitialize:function(c,b){console.log(Ext.getStore(\"SessionStore\").getAt(0).data.permission);if(Ext.getStore(\"SessionStore\").getAt(0).data.permission==2){var a=",604047,71,",window_compte]}c.add(a);Ext.getCmp(\"Compte\").updateWithRecord(Ext.getStore(\"SessionStore\").getAt(0).data.sessionId,Ext.getStore(\"SessionStore\").getAt(0).data.restaurant",606732,35,"Main",607019,56,"report\",\"Task\",\"APImeteo\",\"Stock\",\"AddModel\",\"Session\"],stores:[\"ReportStore\",\"TaskStore\",\"ReportDetailStore\",\"ApiMeteoStore\",\"PrevisionsStore\",\"StockStore\",\"SendAddStore\",\"Session",607095,40,"Midi\",\"AddSoir\",\"Reports\",\"TaskList\",\"ReportsDetail\",\"Previsions\",\"Stocks\",\"Compte",607157,52,"askController\",\"ReportController\",\"PrevisionsController\",\"Main",607216,527,"var a=Ext.getStore(\"SessionStore\");a.sync();if(a.getAt(0)==null){",607743,37,"])}else{Ext.Viewport.add([{xtype:\"mainview\"}])}if(Ext.os.is.iOS&&Ext.os.version.major>=7){Ext.select(\".x-toolbar\").applyStyles(\"height: 62px; padding-top: 15px;\")}",607801,206]